# NEU_FlightManager
来自东北大学_$cptbptp$。
## 作者： NEU_Chenyu, NEU_Szh。
声明：本作品开源exe版，并非发行版。同时源码暂时保密,如果交流学习需要，请加QQ：1874050294！

# 航班管理系统使用说明

## 系统概述

本系统是一个基于Windows平台的综合性航班管理系统，采用C语言和Windows API开发，提供完整的航班信息管理、用户管理、机票预订、座位选择等功能。系统支持管理员和普通用户两种角色，具有友好的图形界面和完善的数据管理功能。

---

## 系统要求

- **操作系统**: Windows 7/8/10/11
- **编译器**: 支持C99标准的编译器（如MinGW、Visual Studio）
- **依赖库**: Windows API、CommCtrl库
- **文件权限**: 需要读写权限（用于数据文件操作）

---

## 首次运行设置

### 1. 必需文件

确保以下数据文件存在于程序目录：
- `admin.txt` - 用户信息文件
- `flights.dat` - 航班信息文件  
- `orders.dat` - 订单信息文件
- `airports.dat` - 机场信息文件
- `price.dat` - 价格信息文件
- `附加费用(en).dat` - 附加费用配置文件
- `pic/neu.ico` - 系统图标文件（可选）

### 2. 默认管理员账户

如果是首次运行，系统会自动创建默认管理员账户：
- 用户名: `admin`
- 密码: `123456`
- 用户类型: 管理员

---
## EXE 直接运行版
## 详细功能说明

### 一、登录系统

#### 1.1 用户登录
1. 启动程序后进入登录界面
2. 输入用户名和密码
3. 点击"登录"按钮
4. 系统验证身份后跳转到对应功能界面

#### 1.2 用户注册
1. 点击"注册"按钮
2. 填写完整用户信息：
   - 用户名（必填，不可重复）
   - 密码（必填）
   - 真实姓名（必填）
   - 身份证号（必填，18位）
   - 手机号码（必填，11位）
   - 密保问题和答案（用于找回密码）
3. 点击"确认注册"完成注册

#### 1.3 找回密码
1. 点击"找回密码"按钮
2. 输入用户名，点击"下一步"
3. 回答注册时设置的密保问题
4. 验证通过后设置新密码

#### 1.4 数据恢复
1. 点击"恢复数据"按钮
2. 输入恢复密钥：`cxkzuishuai`
3. 恢复系统默认数据

---

### 二、管理员功能

管理员登录后进入航班管理主界面，具有完整的系统管理权限。

#### 2.1 航班管理

**2.1.1 查看航班列表**
- 主界面显示所有航班信息
- 信息包括：航班号、航空公司、出发地→目的地、机型、起降时间

**2.1.2 添加航班**
1. 点击"添加航班"按钮
2. 填写航班信息：
   - 航班号（如：CA123）
   - 航空公司名称
   - 出发/到达机场（从下拉列表选择）
   - 起飞/到达时间（精确到分钟）
   - 执飞飞机注册号（如：B-1234）
   - 舱位配置：
     - 头等舱(F)：等级代码、总座位数、价格系数
     - 商务舱(B)：等级代码、总座位数、价格系数  
     - 经济舱(Y)：等级代码、总座位数、价格系数
3. 点击"确认添加"保存航班信息

**2.1.3 修改航班**
1. 在航班列表中选择要修改的航班
2. 点击"修改航班"按钮
3. 在弹出窗口中编辑航班信息
4. 修改完成后点击"确认修改"

**2.1.4 删除航班**
1. 选择要删除的航班
2. 点击"删除航班"按钮
3. 确认删除操作
4. 注意：有订单的航班无法删除

**2.1.5 查看航班详情**
1. 选择航班后点击"查看详情"
2. 显示完整航班信息和乘客列表
3. 可查看该航班所有订单详情

#### 2.2 航班查询与排序

**2.2.1 基础搜索**
1. 在搜索框输入关键词
2. 点击"搜索"进行模糊匹配
3. 点击"下一个"查找下一个匹配项

**2.2.2 精确查询**
1. 点击"精确查询"按钮
2. 选择查询类型：
   - 航班号
   - 出发地
   - 目的地  
   - 航空公司
   - 航班唯一ID
   - 飞机注册号
3. 输入精确查询值
4. 点击"查询"获取结果

**2.2.3 排序功能**
1. 点击"排序航班"按钮
2. 可按以下字段排序：
   - 航班号
   - 出发时间
   - 到达时间
   - 出发地
   - 目的地
3. 支持升序/降序切换
4. 支持多条件组合排序

**2.2.4 高级筛选**
1. 使用模糊查找功能
2. 输入筛选条件进行实时过滤
3. 点击"刷新列表"恢复完整数据

#### 2.3 用户管理

**2.3.1 查看用户列表**
1. 点击"查看用户"按钮
2. 显示所有注册用户信息
3. 包括姓名、手机号、用户类型等

**2.3.2 添加用户**
1. 点击"添加用户"按钮
2. 填写完整用户信息
3. 选择用户类型（管理员/普通用户）
4. 设置密保问题和答案

**2.3.3 编辑用户**
1. 选择用户后点击"编辑用户"
2. 修改用户信息
3. 保存更改

**2.3.4 用户排序**
1. 支持按姓名、身份证、手机号等字段排序
2. 支持升序/降序排列

#### 2.4 机场管理

**2.4.1 查看机场列表**
1. 点击"机场管理"按钮
2. 显示所有机场信息（三字码、名称、城市）

**2.4.2 添加机场**
1. 填写机场信息：
   - 三字码（3位大写字母，如PEK）
   - 机场全称
   - 所在城市
2. 点击"添加"保存

**2.4.3 删除机场**
1. 选择要删除的机场
2. 点击"删除"
3. 注意：被航班使用的机场无法删除

**2.4.4 查看详情**
1. 选择机场后点击"查看详情"
2. 显示机场信息和相关航班

#### 2.5 价格管理

**2.5.1 设置航班价格**
1. 点击"票价管理"按钮
2. 选择航班设置各舱位价格：
   - 经济舱价格
   - 商务舱价格
   - 头等舱价格
3. 保存价格设置

**2.5.2 附加费用设置**
1. 设置燃油附加费率
2. 设置机场建设费率
3. 这些费用将自动计算到订单总价中

#### 2.6 数据统计

**2.6.1 系统统计**
1. 点击"数据统计"按钮
2. 查看系统整体运营数据：
   - 总航班数
   - 总用户数
   - 总订单数
   - 收入统计

**2.6.2 条件统计**
1. 设置统计条件进行筛选
2. 按时间范围、航班类型等维度统计

---

### 三、普通用户功能

普通用户登录后进入个人功能界面，主要进行机票查询和预订操作。

#### 3.1 航班查询与预订

**3.1.1 航班订购**
1. 点击"航班订购"按钮
2. 浏览可用航班列表
3. 选择合适的航班

**3.1.2 查看航班详情**
1. 选择航班后点击"订票"按钮
2. 查看详细航班信息：
   - 航班基本信息
   - 各舱位价格和剩余座位
   - 价格明细（基准价+燃油费+机建费）

**3.1.3 座位选择**
1. 在航班详情界面选择舱位类型
2. 点击对应的"选择X舱座位"按钮
3. 进入座位选择界面：
   - **头等舱**: 每排4座（1A-1D, 2A-2D...）
   - **商务舱**: 每排6座（起始排号=头等舱排数+1）
   - **经济舱**: 每排6座（起始排号=头等舱+商务舱排数+1）
4. 点击空闲座位完成选择
5. 已预订的座位显示为禁用状态

**3.1.4 完成订票**
1. 选择座位后自动生成订单
2. 系统分配唯一订单号和票号
3. 计算总价格（基准价+燃油附加费+机场建设费）
4. 显示订票成功提示

#### 3.2 个人信息管理

**3.2.1 查看个人信息**
1. 点击"查看信息"按钮
2. 显示个人详细信息：
   - 基本信息（姓名、身份证、手机号）
   - 账户信息（用户名、注册时间）

**3.2.2 修改个人信息**
1. 在个人信息界面点击"修改信息"
2. 可修改手机号码等非关键信息
3. 保存修改

#### 3.3 机票管理

**3.3.1 查看机票列表**
1. 点击"信息统计"查看个人机票
2. 显示所有已购买的机票
3. 包括航班信息、座位号、订单状态

**3.3.2 机票详情**
1. 选择机票查看详细信息
2. 显示完整订单信息：
   - 订单号和票号
   - 航班信息
   - 乘客信息
   - 价格明细
   - 座位号

**3.3.3 订单状态**
- **待支付**(0): 刚下单，未支付
- **已出票**(1): 已支付，正常状态
- **已改签**(2): 已办理改签
- **已退票**(3): 已办理退票

#### 3.4 高级功能

**3.4.1 排序功能**
1. 点击"排序"按钮
2. 对航班列表进行排序
3. 支持多种排序条件

**3.4.2 关于系统**
1. 点击"关于"按钮
2. 查看系统版本信息和使用说明

---

### 四、数据文件说明

#### 4.1 用户数据文件 (admin.txt)
```
格式：用户名 密码 用户类型 姓名 身份证 手机号 密保问题 密保答案
示例：admin admin123 0 管理员 110101199001011234 13800138000 您的出生地? 北京
```

#### 4.2 航班数据文件 (flights.dat)
```
格式：航班ID 航班号 航空公司 出发地 目的地 起飞时间 到达时间 机型 舱位信息
示例：20231201-001 CA123 中国国际航空 PEK SHA 2023-12-01 08:00 2023-12-01 10:30 B737-800 ...
```

#### 4.3 订单数据文件 (orders.dat)
```
格式：订单号 航班ID 舱位代码 乘客姓名 身份证 手机号 票号 价格信息 订单时间 状态 座位号
示例：20231201080030001 20231201-001 Y 张三 110101199001011234 13800138000 3140123456789 ...
```

#### 4.4 机场数据文件 (airports.dat)
```
格式：三字码 机场名称 所在城市
示例：PEK 北京首都国际机场 北京
```

#### 4.5 价格数据文件 (price.dat)
```
格式：航班号 经济舱价格 商务舱价格 头等舱价格
示例：CA123 800.00 1500.00 3000.00
```

#### 4.6 附加费用文件 (附加费用(en).dat)
```
格式：燃油附加费率 机场建设费率
示例：0.10 0.05
```

---

### 五、操作技巧与注意事项

#### 5.1 基本操作技巧

1. **快速查找**: 使用搜索功能快速定位特定航班或用户
2. **批量操作**: 善用排序和筛选功能提高操作效率
3. **数据备份**: 定期备份数据文件，防止数据丢失
4. **权限管理**: 合理分配用户权限，管理员谨慎操作

#### 5.2 常见问题解决

**问题1：无法登录**
- 检查用户名密码是否正确
- 确认用户是否已注册
- 检查admin.txt文件是否存在

**问题2：航班添加失败**
- 检查机场代码是否在airports.dat中存在
- 确认航班号是否重复
- 验证时间格式是否正确

**问题3：订票失败**
- 确认航班是否已过起飞时间
- 检查座位是否已被预订
- 验证乘客信息是否完整

**问题4：数据丢失**
- 使用"恢复数据"功能恢复默认数据
- 从备份文件中恢复数据
- 重新输入丢失的数据

#### 5.3 性能优化建议

1. **定期清理**: 清理过期订单和无效数据
2. **索引维护**: 保持数据文件格式规范
3. **内存管理**: 避免长时间运行导致内存泄漏
4. **并发控制**: 避免多人同时修改同一数据

#### 5.4 安全注意事项

1. **密码安全**: 设置复杂密码，定期更换
2. **权限控制**: 严格控制管理员权限分配
3. **数据保护**: 定期备份重要数据文件
4. **访问控制**: 限制系统访问人员范围

---

### 六、系统维护

#### 6.1 日常维护

1. **数据备份**: 每日备份所有.dat和.txt文件
2. **日志检查**: 检查系统运行状态
3. **性能监控**: 监控系统响应速度
4. **用户反馈**: 收集用户使用反馈

#### 6.2 故障排除

1. **程序崩溃**: 检查数据文件完整性
2. **数据错误**: 验证文件格式是否正确
3. **功能异常**: 重启程序或恢复默认设置
4. **性能问题**: 清理临时文件和无效数据

#### 6.3 系统升级

1. **版本检查**: 定期检查是否有新版本
2. **数据迁移**: 升级前备份旧版本数据
3. **功能测试**: 升级后全面测试系统功能
4. **用户培训**: 对新功能进行用户培训

---

### 七、联系支持

如果在使用过程中遇到问题，可以通过以下方式获取帮助：

1. **系统帮助**: 点击"使用前阅读"查看内置帮助
2. **恢复功能**: 使用数据恢复功能重置系统
3. **技术支持**: 联系系统开发人员获取技术支持
4. **用户手册**: 参考本使用说明文档

---

**注意**: 本系统为教学演示系统，实际商用需要进一步完善安全性和稳定性。使用过程中请注意数据备份，避免重要数据丢失。
